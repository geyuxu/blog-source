---
title: "笔记-技术分享会-基于微服务的混合云和同城双活实践"
date: 2019-09-18
tags: [java,微服务,云计算]
---

# 背景

私有云微服务系统在大促的时候会扩容机器,那么在大促之前就需要采购物理机.这就造成了大促之后机器闲置,资源浪费.另外,机器准备是需要时间的,大促进行中如果发现准备不充分就尴尬了.

# 混合云

为了解决这个问题,利用阿里云、腾讯云之类的共有云的资源按需分配易扩展的特性,形成混合云的技术方案.

在平常的时候只部署私有云,在大促的时候,将服务部署到公有云上面.

或者流量小的服务走私有云,大流量的服务走公有云.

![](https://img.geyuxu.com/15687748456398.jpg)

有了两套云服务,就可以实现在接入层根据url流量来分配服务调度.
![](https://img.geyuxu.com/15687753014629.jpg)

使用这个方案要注意,每个接口所依赖的微服务需要完整的部署在相应的云上面.

比如图中的create接口和query接口.

我们假设create接口依赖A、B、C、D四个微服务,query接口依赖C、D、E三个微服务.那么在私有云上面要部署完整的A、B、C、D微服务,在公有云上面需要部署C、D、E微服务.如果不这么做,即使公有云和私有云之间的服务调用的打通的,也会有效率问题.

